<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Vanilla ERP Template</title>
<!-- 헤더 -->
<c:import url="/header"></c:import>


<!-- 메신저 CSS -->
<link rel="stylesheet" type="text/css" href="resources/css/gw/msngr/emojionearea.min.css" />
<link rel="stylesheet" type="text/css" href="resources/css/gw/msngr/msngr.css" />
<!-- 구글 폰트  -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

<!-- jquery, emojione, uploader -->
<!-- <script src="resources/script/gw/msngr/jquery-3.5.1.js"></script> -->
<script src="resources/script/gw/msngr/emojionearea.min.js"></script>
<!-- <script src="resources/script/gw/msngr/jquery.dm-uploader.min.js"></script> -->
<script type="text/javascript">

	/* 
    $(document).ready(function() {
	makeAlert(1, "Information", "정보내용!!!", null);
	makeOneBtnPopup(2, "팝업제목", "이거슨내용임", true, 400, 500, null, "확인용", function() {
		closePopup(2);
	});
	makeTwoBtnPopup(3, "팝업제목2", "이거슨내용임22", true, 400, 500, null, "바꾸기", function() {
		popupBtnChange(4, 1, "바꿔!", function() {
			popupContentsChange(4, "내용도바꿔~", null);
		});
	}, "확인용", function() {
		closePopup(3);
	}); 
	
	$("#aBtn a")[0].click();
    });
    
	*/
</script>
</head>
<body>
<!-- 나의팝업 -->

<div class="chtrm_emplys_wrap">
	<div class="chtrm_emplys_bg"></div>
		<div class="chtrm_emplys_popup">
			<div class="chtrm_emplys_popup_header">새로운 대화방</div>
		
			<div class="chtrm_emplys_popup_body">
				<div class="emply_row">
					<img alt="사진" class="invitePhoto" src="resources/images/common/no_image.png">
					<span class="No emply_con">20200625</span>
					<span class="Nm emply_con">김동기</span>
					<span class="dprtmnt emply_con">영업부</span>
					<span class="grade emply_con">대리</span>
				</div>
				
				
				
			</div>
		</div>
</div> 



<!-- 팝업 -->
<div class="popup_wrap">
<div class="popup_bg"></div>
	<div class="popup">
		<div class="con">
			<div class="con_title"><div class="con_title_txt">팝업 제목</div></div>
			<div class="con_con">
				<div class="inviteWrap">
					<div class="inviteHeader">
						<!-- 초대 검색 -->
						<div class="header_search">
							<form action="#" id="emplySearchForm">
								<select name="searchGbn" class="searchGbn">
									<option value="gbn_all">전체</option>
									<option value="gbn_no">사원번호</option>
									<option value="gbn_name">이름</option>
									<option value="gbn_dprtmt">부서</option>
								</select>
								<input type="text" class="searchTxt" name="searchTxt" placeholder="검색하세요">
							</form>
							<input type="button" class="createBtn" id="emplySearchBtn" value="검색">
						</div>
						
						<!-- 초대 선택된사람 form -->
						<form action="#" id="inviteForm">
							<!-- <input type="hidden" class="emplyNo1" name="emplyNo" value="1"> -->
						</form>						
						
						<!-- 초대 선택된사람 -->
						<div class="header_selected">
						<!-- 
							<span class="selected" emplyNo="1">
								<img alt="사진" class="invitePhoto" src="resources/images/common/no_image.png">
								<span class="emply_nm">김동기</span>
							</span>
						-->
						</div>
						
						
					</div>
										
					<!-- 사원 검색 결과 목록 -->
					<div class="inviteBody">
<!-- 					
						<div class="emply_row">
							<img alt="사진" class="invitePhoto" src="resources/images/common/no_image.png">
							<span class="No emply_con">20200625</span>
							<span class="Nm emply_con">김동기</span>
							<span class="dprtmnt emply_con">영업부</span>
							<span class="grade emply_con">대리</span>
						</div>
						<div class="emply_row">
							<img alt="사진" class="invitePhoto" src="resources/images/common/no_image.png">
							<span class="No emply_con">20200625</span>
							<span class="Nm emply_con">김동기</span>
							<span class="dprtmnt emply_con">영업부</span>
							<span class="grade emply_con">대리</span>
						</div>

 -->
					</div> 

					<div class="inviteBottom">
					
					
					</div>
				</div>
			</div>
		</div>
		<div class="bottom_bar">
<!-- 		
			<div class="popup_btn"><div class="popup_btn_txt">저장</div></div>
-->			
			 <div class="popup_btn" ><div class="popup_btn_txt" id="popupInviteBtn">초대</div></div>
			<div class="popup_btn" ><div class="popup_btn_txt" id="popupCloseBtn">닫기</div></div>
		</div>
	</div>
</div>


	<div class="top_area">
		<div class="logo_wrap">
			<div class="logo_table">
				<div class="logo">Vanilla ERP</div>
			</div>
		</div>
		<div class="gnb_wrap">
			<div class="gnb_table">
				<div class="gnb">Home > 그룹웨어 > 전자결재 > 임시보관함</div>
			</div>
		</div>
		<div class="info_wrap">
			<div class="info_table">
				<div class="info">
					<img class="user_photo" alt="사진" src="resources/images/common/no_image.png" />
					<div class="info_txt">홍길동(경영관리부 대리)</div>
				</div>
			</div>
		</div>
		<div class="opt_btn_wrap">
			<div class="opt_btn_table">
				<div class="opt_btn">
					<img class="config_btn" alt="설정" src="resources/images/common/config.png" /> <img
						class="logoff_btn" alt="로그오프" src="resources/images/common/logoff.png" />
				</div>
			</div>
		</div>
	</div>
	<div class="middle_wrap">
		<div class="left_area">
			<div class="menu1_wrap">
				<div class="menu1_on">
					<div class="menu1_txt_bg"></div>
					<div class="menu1_txt_wrap">
						<div class="menu1_txt_table">
							<div class="menu1_txt">그룹웨어</div>
						</div>
					</div>
					<div class="menu2_wrap">
						<div class="menu2_on" next="true">
							<div class="menu2_txt_bg"></div>
							<div class="menu2_txt_wrap">
								<div class="menu2_txt_table">
									<div class="menu2_txt">전자결재</div>
								</div>
							</div>
							<div class="menu3_wrap">
								<div class="menu3_on">
									<div class="menu3_txt_bg"></div>
									<div class="menu3_txt_wrap">
										<div class="menu3_txt_table">
											<div class="menu3_txt">새 결재 작성</div>
										</div>
									</div>
								</div>
								<div class="menu3">
									<div class="menu3_txt_bg"></div>
									<div class="menu3_txt_wrap">
										<div class="menu3_txt_table">
											<div class="menu3_txt">임시보관함</div>
										</div>
									</div>
								</div>
								<div class="menu3">
									<div class="menu3_txt_bg"></div>
									<div class="menu3_txt_wrap">
										<div class="menu3_txt_table">
											<div class="menu3_txt">수신함</div>
										</div>
									</div>
								</div>
								<div class="menu3">
									<div class="menu3_txt_bg"></div>
									<div class="menu3_txt_wrap">
										<div class="menu3_txt_table">
											<div class="menu3_txt">발신함</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="menu2">
							<div class="menu2_txt_bg"></div>
							<div class="menu2_txt_wrap">
								<div class="menu2_txt_table">
									<div class="menu2_txt">게시판</div>
								</div>
							</div>
						</div>
						<div class="menu2">
							<div class="menu2_txt_bg"></div>
							<div class="menu2_txt_wrap">
								<div class="menu2_txt_table">
									<div class="menu2_txt">일정</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="menu1">
					<div class="menu1_txt_bg"></div>
					<div class="menu1_txt_wrap">
						<div class="menu1_txt_table">
							<div class="menu1_txt">인사</div>
						</div>
					</div>
					<div class="menu2_wrap">
						<div class="menu2">
							<div class="menu2_txt_bg"></div>
							<div class="menu2_txt_wrap">
								<div class="menu2_txt_table">
									<div class="menu2_txt">인사기록카드</div>
								</div>
							</div>
						</div>
						<div class="menu2">
							<div class="menu2_txt_bg"></div>
							<div class="menu2_txt_wrap">
								<div class="menu2_txt_table">
									<div class="menu2_txt">휴가</div>
								</div>
							</div>
						</div>
						<div class="menu2">
							<div class="menu2_txt_bg"></div>
							<div class="menu2_txt_wrap">
								<div class="menu2_txt_table">
									<div class="menu2_txt">급여</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		

		<div class="right_area">
			<div class="title_wrap">
				<div class="title_table">
					<div class="title_txt">메신저</div>
					
				</div>
			</div>
			<div class="contents_area">
				<!-- 내용은 여기에 구현하세요. -->
				<!-- 현재 대화방 정보 -->
				<form action="#" id="cur_chtrm_form">
					<!-- 나의 사원번호 -->
					<input type="hidden" id="my_emply_no" value="${myEmplyNo}">
					<!-- 현재 채팅창 방 번호 -->
					<input type="hidden" id="cur_chtrm_no" name="curChtrmNo" value="">
					<!-- scroll 위로 올려서 이전 메세지 로딩 할 때 기준 메세지 -->					
					<input type="hidden" id="firstMsgNo" name="firstMsgNo" value="">
					<!-- 현재 채팅창에 표시된 마지막 메세지의 번호. 이 이후의 메세지 계속 갱신 -->
					<input type="hidden" id="lastMsgNo" name="lastMsgNo" value="">
					<!-- 전송할 메세지 여기로 다시 담아서 serialize!-->
					<input type="hidden" id="send_msg" name="cntnt" value="">
					<!-- 현재 채팅방 제목 수정시 여기로 값을 담아서 serialize -->	
					<input type="hidden" id="newChtrmName" name="newChtrmName" value="">	
				</form>
				
				<!-- 현재 대화창의 마지막 메세지가 가지는 날짜 데이터 , 이거있어야 계속 날짜 표시 가능하다. 지우지말자-->
				<input type="hidden" id="lastMsgDate" name="lastMsgDate" value="">
		
				<!-- 파일 다운로드를 위한 히든 atag -->	
				<a href="" id="fileDownLink" target="_blank" css="display: none" download>Click Here</a>
	
		 		
		 		
				<div class="msngr_wrap">
					<!-- 현재 대화방  -->
 					<div class="curRoom">
 						<div class="curRoomHeader">
 							<h5 class="chtrmNameWrap">
	 							<span id="chtrmName"> 채팅방명요</span>
	 							<input id="chtrmNameInput" value="채팅방명요" >
	 							<input type="button" class="editBtn" id="editOnBtn" value="수정" /> 							
	 							<input type="button" class="editBtn" id="editSubmitBtn" value="확인" /> 							
 							</h5>
 							<div class="chtrmEmplysWrap">
 							
	 							<span class="chtrmEmplys">
	 								누구누외2명
	 							</span>
 							</div>
 							
 							
 						</div>
						<form id="fileForm" 
							name="fileForm" 
							action="msngrFileUploadAjax" 
							method="post" 
							enctype="multipart/form-data">
							<input type="file" id="hiddenFile" title="Click to add Files" multiple>
						</form>
						<div id="drop-area" class="curRoomBody" >
								<!-- 파일 업로드를 위한 hidden form/input -->
							
<!--			
							<div class="status">
								----------------------------------------
								2020년 06월 25일
								----------------------------------------
							</div>
							<div class="status">
								-----------------------------------
								김대리님이 입장하였습니다 
								-----------------------------------
							</div>
								
							<div class="msg myM">
								<span class="msgTime">10:32</span> 
								<span class="cntnt">
									<span class="cntnt_file">
										<span class="file_sum"> 
											내가보낸 파일제목.jpg 외 1개<br/>
											용량 : 322kb
										</span>
										<img alt="파일" class="fileIcon" src="resources/images/gw/msngr/file.png">
									</span>
									<input type="button" id="downloadBtn" value="다운로드">
								</span>
							</div>						
									
							<div class="msg otherM">
								<div class="senderWrap">
									<img class="senderProfile" src="resources/images/gw/msngr/user.png">
									<span class="sender">김대리</span>
								</div>
								<span class="cntnt">
									<span class="cntnt_file">
											<span class="file_sum"> 
												남이보낸 파일제목.jpg 외 1개<br/>
												용량 : 322kb
											</span>										
											<img alt="파일" class="fileIcon" src="resources/images/gw/msngr/file.png">
									</span>
									<input type="button" id="downloadBtn" value="다운로드">									
								</span> 
								<span class="msgTime">10:32</span>
							</div>			
											
							<div class="msg otherM">
								<div class="senderWrap">
									<img class="senderProfile" src="resources/images/gw/msngr/user.png">
									<span class="sender">김대리</span>
								</div>
								<span class="cntnt">
									<div id="aBtn">
										<a href="resources/upload/2/202007141037373448651.png" target="_blank" download>Click Here</a>
									</div>
								</span> <span class="msgTime">10:32</span>
							</div>

							<div class="msg myM">
								<span class="msgTime">10:32</span> 
								<span class="cntnt">내가보낸메세지1</span>
							</div>
-->						
						
						<!-- 메세지 여기에 출력될것임 -->
						</div>

						<div class="curRoomBottom">
							<input type="button" id="inviteBtn"> 
							<input type="hidden" id="chatInput" name="chatInput" placeholder="채팅입력" /> 
							<input type="button" id="sendBtn"> 
							<input type="button" id="fileInputBtn"> 
							<!-- <input type="button" id="emojiInputBtn"> -->
						</div>
					</div>
					<div class="chtRmList">
						<div class="chtRmListHeader">
							<form action="#" id="chtRmSearchForm">
								<input type="text" id="chtRmSearchTxt" placeholder="채팅방 제목을 검색하세요" /> 
								<input type="button" id="newRoomBtn">
							</form>
						</div>
						<!-- 대화방 목록 -->
						<div class="chtRmBody">
							<!-- 즐겨찾기 된 대화방 -->
							<div class="chtRmMark">
								<div class="chtRmMarkHeader">
									<span>즐겨찾기 목록</span>
									<span class="arrowImg"></span>
								</div>
								
								<div class="chtRmMarkBody chtRms">
									<div class="chtRm">
										<div class="chtRmHeader">
											<div class="name">즐겨찾기 대화방1</div>
											<div class="participant">김대리님 외 1명</div>
										</div>								
										<div class="chtRmCntnt">
											<div class="summary">보내주신 기안서 잘 받았습니..</div>
											<div class="time">10:32</div>
											<img alt="사진" class="bkmrkBtn" chtrmNo="1" src="resources/images/gw/msngr/bkmrk_on.png">
										</div>	
									</div> 
								</div>												
							</div>
							
							<div class="chtRms chtRmNmlBody">
								<div class="chtRm">									
									<div class="chtRmHeader">
			 							<div class="name">일반 대화방1</div>
										<div class="participant">김대리님 외 1명</div>
									</div>
									<div class="chtRmCntnt">
										<div class="summary">보내주신 기안서 잘 받았습니..</div>
										<div class="time">10:32</div>
										<img alt="사진" class="bkmrkBtn" chtrmNo="2" src="resources/images/gw/msngr/bkmrk_off.png">
									</div>
								</div>
							</div>							
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
	

	

	<script src="resources/script/gw/msngr/msngr.js"></script>
	<script>
	    // 새로운 채팅방 생성 등으로 jsp로딩과 동시에 채팅방 입장해야 한다!
		$(document).ready(function(){	    
		    
		    if('${curChtrmNo}'!=''){
				enterChtrm('${curChtrmNo}');
				refreshCurChtrm();	
			}
		})
	    
	</script>

</body>
</html>